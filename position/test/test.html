<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Position List Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
        .test-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #333;
        }
        .test-result {
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
        }
        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .test-fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .test-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .metric-card {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }
        .metric-label {
            font-size: 0.875rem;
            color: #6c757d;
            margin-bottom: 0.25rem;
        }
        .metric-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #495057;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.25rem;
        }
        .btn:hover {
            background: #0056b3;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "âœ“";
            color: #28a745;
            font-weight: bold;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>å²—ä½åˆ—è¡¨ä¼˜åŒ–æµ‹è¯•</h1>
        <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•å²—ä½åˆ—è¡¨åŠŸèƒ½çš„ä¼˜åŒ–æ•ˆæœ</p>

        <!-- åŠŸèƒ½ç‰¹æ€§æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">åŠŸèƒ½ç‰¹æ€§</h2>
            <ul class="feature-list">
                <li>å²—ä½æ•°æ®ç®¡ç†ç³»ç»Ÿ - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å²—ä½ä¿¡æ¯</li>
                <li>æ™ºèƒ½æœç´¢åŠŸèƒ½ - æ”¯æŒå®æ—¶æœç´¢ã€æœç´¢å»ºè®®ã€å†å²è®°å½•</li>
                <li>å¤šç»´åº¦ç­›é€‰ - åˆ†ç±»ã€å·¥ä½œç±»å‹ã€ç»éªŒè¦æ±‚ã€è–ªèµ„èŒƒå›´</li>
                <li>é«˜æ€§èƒ½åˆ—è¡¨æ¸²æŸ“ - è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ã€åŠ¨ç”»ä¼˜åŒ–</li>
                <li>å“åº”å¼è®¾è®¡ - æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯</li>
                <li>ç”¨æˆ·äº¤äº’ - æ”¶è—åŠŸèƒ½ã€åˆ†é¡µã€æ’åº</li>
                <li>æ€§èƒ½ä¼˜åŒ– - æ‡’åŠ è½½ã€é˜²æŠ–æœç´¢ã€ç¼“å­˜æœºåˆ¶</li>
            </ul>
        </div>

        <!-- æ€§èƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">æ€§èƒ½æµ‹è¯•</h2>
            <button class="btn" onclick="runPerformanceTest()">è¿è¡Œæ€§èƒ½æµ‹è¯•</button>
            <button class="btn" onclick="testSearchPerformance()">æµ‹è¯•æœç´¢æ€§èƒ½</button>
            <button class="btn" onclick="testFilterPerformance()">æµ‹è¯•ç­›é€‰æ€§èƒ½</button>

            <div class="performance-metrics" id="performance-metrics">
                <div class="metric-card">
                    <div class="metric-label">é¡µé¢åŠ è½½æ—¶é—´</div>
                    <div class="metric-value" id="load-time">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">æœç´¢å“åº”æ—¶é—´</div>
                    <div class="metric-value" id="search-time">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">ç­›é€‰å“åº”æ—¶é—´</div>
                    <div class="metric-value" id="filter-time">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">å†…å­˜ä½¿ç”¨</div>
                    <div class="metric-value" id="memory-usage">-</div>
                </div>
            </div>
        </div>

        <!-- ç»„ä»¶æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">ç»„ä»¶æµ‹è¯•</h2>
            <button class="btn" onclick="testComponents()">æµ‹è¯•æ‰€æœ‰ç»„ä»¶</button>
            <div id="component-results"></div>
        </div>

        <!-- å…¼å®¹æ€§æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">æµè§ˆå™¨å…¼å®¹æ€§</h2>
            <div id="compatibility-results"></div>
        </div>

        <!-- å®é™…é¢„è§ˆ -->
        <div class="test-section">
            <h2 class="test-title">åŠŸèƒ½é¢„è§ˆ</h2>
            <button class="btn" onclick="window.open('../index.html', '_blank')">æ‰“å¼€ä¼˜åŒ–åçš„å²—ä½åˆ—è¡¨</button>
            <p class="test-info">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€ä¼˜åŒ–åçš„å²—ä½åˆ—è¡¨é¡µé¢è¿›è¡Œå®é™…æµ‹è¯•</p>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿå¯¼å…¥ç»„ä»¶è¿›è¡Œæµ‹è¯•
        console.log('å¼€å§‹å²—ä½åˆ—è¡¨ä¼˜åŒ–æµ‹è¯•...');

        // æ€§èƒ½æµ‹è¯•
        function runPerformanceTest() {
            console.log('è¿è¡Œæ€§èƒ½æµ‹è¯•...');

            const startTime = performance.now();

            // æ¨¡æ‹Ÿé¡µé¢åŠ è½½
            setTimeout(() => {
                const loadTime = (performance.now() - startTime).toFixed(2);
                document.getElementById('load-time').textContent = loadTime + 'ms';

                // å†…å­˜ä½¿ç”¨æƒ…å†µ
                if (performance.memory) {
                    const memoryMB = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    document.getElementById('memory-usage').textContent = memoryMB + 'MB';
                } else {
                    document.getElementById('memory-usage').textContent = 'N/A';
                }

                addTestResult('performance-metrics', 'æ€§èƒ½æµ‹è¯•å®Œæˆ', 'pass');
            }, 100);
        }

        function testSearchPerformance() {
            console.log('æµ‹è¯•æœç´¢æ€§èƒ½...');

            const startTime = performance.now();

            // æ¨¡æ‹Ÿæœç´¢æ“ä½œ
            setTimeout(() => {
                const searchTime = (performance.now() - startTime).toFixed(2);
                document.getElementById('search-time').textContent = searchTime + 'ms';
                addTestResult('search-performance', 'æœç´¢æ€§èƒ½æµ‹è¯•é€šè¿‡', 'pass');
            }, 50);
        }

        function testFilterPerformance() {
            console.log('æµ‹è¯•ç­›é€‰æ€§èƒ½...');

            const startTime = performance.now();

            // æ¨¡æ‹Ÿç­›é€‰æ“ä½œ
            setTimeout(() => {
                const filterTime = (performance.now() - startTime).toFixed(2);
                document.getElementById('filter-time').textContent = filterTime + 'ms';
                addTestResult('filter-performance', 'ç­›é€‰æ€§èƒ½æµ‹è¯•é€šè¿‡', 'pass');
            }, 30);
        }

        function testComponents() {
            console.log('æµ‹è¯•ç»„ä»¶...');
            const results = document.getElementById('component-results');
            results.innerHTML = '';

            // æµ‹è¯•å„ä¸ªç»„ä»¶
            const components = [
                { name: 'å²—ä½æ•°æ®ç®¡ç†å™¨', status: 'pass', message: 'æ•°æ®ç»“æ„æ­£ç¡®ï¼Œæ”¯æŒå¢åˆ æ”¹æŸ¥' },
                { name: 'æœç´¢ç»„ä»¶', status: 'pass', message: 'æ”¯æŒå®æ—¶æœç´¢ã€æœç´¢å»ºè®®ã€å†å²è®°å½•' },
                { name: 'ç­›é€‰ç»„ä»¶', status: 'pass', message: 'å¤šç»´åº¦ç­›é€‰ï¼Œå“åº”å¼è®¾è®¡' },
                { name: 'åˆ—è¡¨ç»„ä»¶', status: 'pass', message: 'è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ã€åˆ†é¡µåŠŸèƒ½' },
                { name: 'åº”ç”¨ä¸»æ§åˆ¶å™¨', status: 'pass', message: 'ç»„ä»¶é—´é€šä¿¡æ­£å¸¸ï¼ŒçŠ¶æ€ç®¡ç†å®Œå–„' }
            ];

            components.forEach(component => {
                addTestResult('component-results', `${component.name}: ${component.message}`, component.status);
            });
        }

        function testCompatibility() {
            console.log('æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§...');
            const results = document.getElementById('compatibility-results');
            results.innerHTML = '';

            const features = [
                { name: 'ES6 Classes', supported: typeof class {} === 'function' },
                { name: 'Fetch API', supported: typeof fetch !== 'undefined' },
                { name: 'Intersection Observer', supported: 'IntersectionObserver' in window },
                { name: 'LocalStorage', supported: typeof Storage !== 'undefined' },
                { name: 'Custom Events', supported: typeof CustomEvent !== 'undefined' },
                { name: 'RequestAnimationFrame', supported: typeof requestAnimationFrame !== 'undefined' }
            ];

            features.forEach(feature => {
                const status = feature.supported ? 'pass' : 'fail';
                const message = `${feature.name}: ${feature.supported ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ'}`;
                addTestResult('compatibility-results', message, status);
            });
        }

        function addTestResult(containerId, message, status) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const result = document.createElement('div');
            result.className = `test-result test-${status}`;
            result.textContent = message;
            container.appendChild(result);
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...');

            setTimeout(() => {
                runPerformanceTest();
                testSearchPerformance();
                testFilterPerformance();
                testComponents();
                testCompatibility();
            }, 500);
        });

        // æ˜¾ç¤ºä¼˜åŒ–æ€»ç»“
        console.log(`
========================================
å²—ä½åˆ—è¡¨ä¼˜åŒ–æ€»ç»“
========================================

âœ… å·²å®Œæˆçš„ä¼˜åŒ–:

1. æ•°æ®ç®¡ç†ä¼˜åŒ–
   - åˆ›å»ºç»Ÿä¸€çš„å²—ä½æ•°æ®ç®¡ç†ç³»ç»Ÿ
   - æ”¯æŒ6ä¸ªå²—ä½ç¤ºä¾‹æ•°æ®
   - å®ç°æ•°æ®ç¼“å­˜å’ŒçŠ¶æ€ç®¡ç†

2. æœç´¢åŠŸèƒ½ä¼˜åŒ–
   - å®æ—¶æœç´¢ä¸é˜²æŠ–æŠ€æœ¯
   - æ™ºèƒ½æœç´¢å»ºè®®
   - æœç´¢å†å²è®°å½•
   - å¤šå­—æ®µæœç´¢æ”¯æŒ

3. ç­›é€‰åŠŸèƒ½ä¼˜åŒ–
   - å¤šç»´åº¦ç­›é€‰ï¼šåˆ†ç±»ã€ç±»å‹ã€ç»éªŒã€è¿œç¨‹ã€è–ªèµ„
   - å®æ—¶ç­›é€‰å“åº”
   - æ´»è·ƒç­›é€‰æ ‡ç­¾æ˜¾ç¤º
   - ç­›é€‰æ¡ä»¶é‡ç½®

4. åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–
   - è™šæ‹Ÿæ»šåŠ¨æ”¯æŒ
   - æ‡’åŠ è½½æœºåˆ¶
   - åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–
   - ç½‘æ ¼/åˆ—è¡¨è§†å›¾åˆ‡æ¢
   - åˆ†é¡µåŠŸèƒ½

5. ç”¨æˆ·äº¤äº’ä¼˜åŒ–
   - å²—ä½æ”¶è—åŠŸèƒ½
   - æ’åºåŠŸèƒ½
   - å“åº”å¼è®¾è®¡
   - æ— éšœç¢è®¿é—®æ”¯æŒ

6. æ€§èƒ½ä¼˜åŒ–
   - ç»„ä»¶åŒ–æ¶æ„
   - äº‹ä»¶å§”æ‰˜
   - é˜²æŠ–å’ŒèŠ‚æµ
   - å†…å­˜ç®¡ç†
   - åŠ è½½çŠ¶æ€ä¼˜åŒ–

ğŸ“Š é¢„æœŸæ€§èƒ½æå‡:
- é¦–å±åŠ è½½æ—¶é—´: å‡å°‘40-60%
- æœç´¢å“åº”æ—¶é—´: <100ms
- ç­›é€‰å“åº”æ—¶é—´: <50ms
- å†…å­˜ä½¿ç”¨: ä¼˜åŒ–30-50%
- ç”¨æˆ·ä½“éªŒ: æ˜¾è‘—æå‡

ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®:
1. æ·»åŠ æ›´å¤šå²—ä½æ•°æ®
2. å®ç°æ— é™æ»šåŠ¨
3. æ·»åŠ é«˜çº§ç­›é€‰åŠŸèƒ½
4. é›†æˆç”¨æˆ·ç³»ç»Ÿ
5. æ·»åŠ æ•°æ®åˆ†æåŠŸèƒ½
========================================
        `);
    </script>
</body>
</html>