---
import BaseLayout from './BaseLayout.astro';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  breadcrumbs?: Array<{ label: string; href: string }>;
}

const {
  title,
  description,
  image = "https://placehold.co/1200x630/png?text=Tying.ai",
  breadcrumbs = [],
} = Astro.props;
---

<BaseLayout title={title} description={description} image={image}>
  <!-- Notion 风格导航栏 -->
  <header class="border-b border-notion-border bg-white sticky top-0 z-50">
    <nav class="max-w-notion-wide mx-auto px-8 py-4">
      <div class="flex items-center justify-between">
        <a href="/" class="flex items-center space-x-2">
          <span class="text-lg font-semibold text-notion-text">Tying.ai</span>
        </a>

        <div class="hidden md:flex items-center space-x-6">
          <a href="/" class="text-notion-text hover:no-underline">Home</a>
          <a href="/wiki" class="text-notion-text hover:no-underline">Career Wiki</a>
          <a href="/company/" class="text-notion-text hover:no-underline">Company</a>
          <a href="/report" class="text-notion-text hover:no-underline">Industry Reports</a>
        </div>

        <button class="md:hidden p-2" id="mobile-menu-button" aria-label="Menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <div class="hidden md:hidden mt-4 pt-4 border-t border-notion-border" id="mobile-menu">
        <div class="flex flex-col space-y-3">
          <a href="/" class="text-notion-text">Home</a>
          <a href="/wiki" class="text-notion-text">Career Wiki</a>
          <a href="/company/" class="text-notion-text">Company</a>
          <a href="/report" class="text-notion-text">Industry Reports</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Notion 风格窄栏内容区 -->
  <main class="min-h-screen bg-white">
    <article class="max-w-notion-narrow mx-auto px-8 py-12">
      <!-- 面包屑导航 -->
      {breadcrumbs.length > 0 && (
        <nav class="flex items-center space-x-2 text-sm text-notion-text-light mb-8">
          {breadcrumbs.map((crumb, index) => (
            <>
              <a href={crumb.href} class="hover:text-notion-text">{crumb.label}</a>
              {index < breadcrumbs.length - 1 && <span>/</span>}
            </>
          ))}
        </nav>
      )}

      <!-- 页面标题 -->
      <h1 class="text-4xl font-bold text-notion-text mb-8">{title}</h1>

      <!-- 内容插槽 -->
      <div class="prose prose-notion max-w-none">
        <slot />
      </div>
    </article>
  </main>

  <!-- 简洁页脚 -->
  <footer class="border-t border-notion-border bg-white">
    <div class="max-w-notion-narrow mx-auto px-8 py-8">
      <div class="flex justify-between items-center text-sm text-notion-text-light">
        <p>&copy; 2024 Tying.ai</p>
        <div class="flex space-x-4">
          <a href="#" class="hover:text-notion-text">Privacy</a>
          <a href="#" class="hover:text-notion-text">Terms</a>
        </div>
      </div>
    </div>
  </footer>
</BaseLayout>

<style>
  /* Notion 风格内容样式 */
  .prose-notion {
    color: var(--text-primary);
    line-height: var(--line-height-relaxed);
  }

  .prose-notion h2 {
    margin-top: var(--space-6);
    margin-bottom: var(--space-3);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
  }

  .prose-notion h3 {
    margin-top: var(--space-4);
    margin-bottom: var(--space-2);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
  }

  .prose-notion p {
    margin-bottom: var(--space-3);
  }

  .prose-notion ul,
  .prose-notion ol {
    margin-bottom: var(--space-3);
    padding-left: var(--space-3);
  }

  .prose-notion li {
    margin-bottom: var(--space-1);
    list-style-position: outside;
  }

  .prose-notion ul li {
    list-style-type: disc;
  }

  .prose-notion ol li {
    list-style-type: decimal;
  }

  .prose-notion a {
    color: var(--text-primary);
    text-decoration: underline;
  }

  .prose-notion a:hover {
    text-decoration: none;
  }

  .prose-notion strong {
    font-weight: var(--font-weight-semibold);
  }

  .prose-notion code {
    font-family: var(--font-family-mono);
    font-size: 0.875em;
    background-color: var(--bg-secondary);
    padding: 0.125rem 0.25rem;
    border-radius: var(--radius-sm);
  }

  .prose-notion pre {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-base);
    padding: var(--space-2);
    overflow-x: auto;
    margin: var(--space-3) 0;
  }

  .prose-notion blockquote {
    border-left: 3px solid var(--border-primary);
    padding-left: var(--space-2);
    margin: var(--space-3) 0;
    color: var(--text-secondary);
  }

  .prose-notion table {
    width: 100%;
    border: 1px solid var(--border-primary);
    margin: var(--space-3) 0;
  }

  .prose-notion th,
  .prose-notion td {
    padding: var(--space-1) var(--space-2);
    border-bottom: 1px solid var(--border-primary);
    text-align: left;
  }

  .prose-notion th {
    background-color: var(--bg-secondary);
    font-weight: var(--font-weight-semibold);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
    }
  });
</script>
