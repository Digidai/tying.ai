---
import { wikiRoles } from '@/data/wiki-content';
import NotionLayout from '@/layouts/NotionLayout.astro';

export async function getStaticPaths() {
  return Object.keys(wikiRoles).map(slug => ({
    params: { slug },
  }));
}

const { slug } = Astro.params;
const role = wikiRoles[slug];

if (!role) {
  return Astro.redirect('/404');
}

const { title, overview, responsibilities, skills, careerPath, salary, education, outlook } = role;

const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Career Wiki', href: '/wiki' },
];
---

<NotionLayout
  title={`${title} | Career Wiki`}
  description={`Complete guide to becoming a ${title}. Learn about responsibilities, required skills, salary ranges, and career progression.`}
  breadcrumbs={breadcrumbs}
>
  <!-- Page Header with Icon -->
  <div class="flex items-center gap-4 mb-8">
    <img src={`/icons/wiki/${slug}.svg`} alt={`${title} icon`} class="w-16 h-16" />
    <h1 class="text-3xl font-bold text-notion-text">{title}</h1>
  </div>

  <!-- Overview -->
  <h2>Overview</h2>
  <p>{overview}</p>

  <!-- Core Responsibilities -->
  <h2>Core Responsibilities</h2>
  <ul>
    {responsibilities.map(item => <li>{item}</li>)}
  </ul>

  <!-- Required Skills -->
  <h2>Required Skills</h2>

  <h3>Technical Skills</h3>
  <ul>
    {skills.technical.map(item => <li>{item}</li>)}
  </ul>

  <h3>Soft Skills</h3>
  <ul>
    {skills.soft.map(item => <li>{item}</li>)}
  </ul>

  <!-- Career Path -->
  <h2>Career Path</h2>

  <h3>Entry Level</h3>
  <p>{careerPath.entry}</p>

  <h3>Mid Level</h3>
  <p>{careerPath.mid}</p>

  <h3>Senior Level</h3>
  <p>{careerPath.senior}</p>

  <h3>Leadership</h3>
  <p>{careerPath.leadership}</p>

  <!-- Salary Range -->
  <h2>Salary Range</h2>
  <div class="overflow-x-auto">
    <table>
      <thead>
        <tr>
          <th>Level</th>
          <th>United States</th>
          <th>Europe</th>
          <th>Asia</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Entry</td>
          <td>{salary.us.entry}</td>
          <td>{salary.eu.entry}</td>
          <td>{salary.asia.entry}</td>
        </tr>
        <tr>
          <td>Mid</td>
          <td>{salary.us.mid}</td>
          <td>{salary.eu.mid}</td>
          <td>{salary.asia.mid}</td>
        </tr>
        <tr>
          <td>Senior</td>
          <td>{salary.us.senior}</td>
          <td>{salary.eu.senior}</td>
          <td>{salary.asia.senior}</td>
        </tr>
        <tr>
          <td>Leadership</td>
          <td>{salary.us.leadership}</td>
          <td>{salary.eu.leadership}</td>
          <td>{salary.asia.leadership}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Education & Qualifications -->
  <h2>Education & Qualifications</h2>
  <ul>
    {education.map(item => <li>{item}</li>)}
  </ul>

  <!-- Industry Outlook -->
  <h2>Industry Outlook</h2>
  <p>{outlook}</p>

  <!-- Getting Started -->
  <h2>Getting Started</h2>
  <ul>
    <li>Research the field and understand role requirements</li>
    <li>Develop relevant skills through education or self-study</li>
    <li>Build a portfolio or gain practical experience</li>
    <li>Network with professionals in the field</li>
    <li>Apply for entry-level positions or internships</li>
    <li>Continue learning and advancing your skills</li>
  </ul>
</NotionLayout>
